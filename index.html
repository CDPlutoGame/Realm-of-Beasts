// ===== INDEX-SKRIPT =====
(function(){

  function isMobile(){
    return window.innerWidth <= 768;
  }

  function getStoredName(){
    return localStorage.getItem("mobileUser") || localStorage.getItem("pcUser");
  }

  function loadOverlay(){
    const script = document.createElement("script");
    script.src = isMobile() ? "auth-mobile.js" : "auth-pc.js";
    document.body.appendChild(script);
  }

  // ❌ SERVICE WORKER KOMPLETT AUS
  /*
  function registerServiceWorker(){
    if("serviceWorker" in navigator){
      navigator.serviceWorker.register("sw.js");
    }
  }
  */

  function showStoredName(name){
    const el = document.getElementById("playerName");
    if(el){
      el.textContent = "Spieler: " + name;
    }
  }

  function init(){

    // registerServiceWorker();  ❌ deaktiviert

    const name = getStoredName();

    if(name){
      showStoredName(name);
    } else {
      loadOverlay();
    }
  }

  if(document.readyState === "loading"){
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }

})();