// ===== INDEX SCRIPT =====
(function(){

  function isMobile(){
    return window.innerWidth <= 768;
  }

  function loadOverlay(){
    const script = document.createElement("script");
    script.src = isMobile() ? "auth-mobile.js" : "auth-pc.js";
    document.body.appendChild(script);
  }

  function registerServiceWorker(){
    if("serviceWorker" in navigator){
      navigator.serviceWorker.register("sw.js");
    }
  }

  function showStoredName(){
    const name =
      localStorage.getItem("mobileUser") ||
      localStorage.getItem("pcUser");

    if(name){
      const el = document.getElementById("playerName");
      if(el){
        el.textContent = "Spieler: " + name;
      }
    }
  }

  function init(){
    registerServiceWorker();
    showStoredName();
    loadOverlay();
  }

  if(document.readyState === "loading"){
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }

})();